<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<title>Google Maps - jQuery Mobile Demos</title>
		<link rel="stylesheet" href="css/Bootstrap.min.css">
		<link rel="stylesheet" href="css/jquery.mobile.structure-1.4.0.min.css" />
		<link rel="stylesheet" href="css/jquery.mobile.icons.min.css" />
		<link rel="stylesheet" href="css/extra.css" />
		<style>
			#map-page, #map-canvas { width: 100%; height: 100%; padding: 0; }
		</style>
		
		<link rel="stylesheet" href="http://fonts.googleapis.com/css?family=Open+Sans:300,400,700">
		<script src="js/jquery.min.js"></script>
		<script src="js/jquery.mobile-1.4.2.min.js"></script>
		<!-- Google Maps JS assets are loaded at bottom of page for performance -->
		<script>
			$(document).on("pagecreate", "#single-page", function(){

				var itemJSON = $.parseJSON(localStorage.data);

				console.log(itemJSON);

				var buildPage = "<div class='container'>";
				buildPage += "<div class='mainHolder'>";
				buildPage += "<div class='imageHolder'>";

				buildPage += "<img class='imageContainer' src='" + checkItemExists("image", itemJSON.photo) + "'>";

				buildPage += "</div>";				
				buildPage += "<div class='mainDetailHolder'>";
				buildPage += "<div class='titleDetailHolder'>";
				buildPage += "<h2>" + checkItemExists("title", itemJSON.name) + "</h2>";
				buildPage += "</div>";
				buildPage += "<div class='addedDetailHolder'>";
				buildPage += "<p>" + checkItemExists("category", itemJSON.type) + "</p>";
				buildPage += "</div>";
				buildPage += "</div>";
				buildPage += "</div>";
				buildPage += "<div class='descriptionHolder'>";
				buildPage += "<h3>Description:</h3>";
				buildPage += checkItemExists("desc", itemJSON.description);
				buildPage += "</div>";				
				buildPage += "<div class='descriptionHolder noTopBorder'>";
				buildPage += "<h3>Address:</h3>";
				buildPage += checkItemExists("title", itemJSON.name)  + "<br />";
				buildPage += checkItemExists("title", itemJSON.address)  + "<br />";
				buildPage += checkItemExists("title", itemJSON.postalCode)  + "<br />";
				buildPage += "</div>";
				buildPage += "</div>";
				$("#single-page-header").append("<h1 class='ui-title' role='heading'>" + checkItemExists("title", itemJSON.name) + "</h1>");
				$("#single-canvas").append(buildPage);


				function checkItemExists(type, item) {
					if (item === undefined) {
						if (type === "desc") {
							return "<p><span>No description has been added!</span><p><a class='add-link' href='#'>Add a Category</a> ";
						} else if (type === "title") {
							return "No title";	
						} else if (type === "category") {
							return "<span>This item hasn't been assigned to a category yet!</span> <a class='add-link' href='#'>Add a Category</a>";
						} else if (type === "image") {
							return "http://placehold.it/800x800&text=No+Image";
						}
					}
					if (type === "image") {
						return item["prefix"] + "360x360" + item["suffix"];
					}
					return item;
				}

				function ajaxPullTest() {
					$.ajax({
						type: "GET",
						url: dataSource,
						dataType: "jsonp",
						crossDomain : true,
						// jsonp:'jsonp',
						data: { ll: latLngDetails },
						success: function(data, textStatus, jqXHR) {
							console.log(data.response.venues.id);
							// run func or return data
						},
						error: function(err) {
							console.log(err);
						}
					});
				}

			});

		</script>
	</head>
	<body>
		<!-- Second Page // Single page // Loads // Single Content -->
		<div data-role="page" id="single-page" data-url="single-page">
			<div data-role="header" id="single-page-header" data-theme="a">
				<a href="http://localhost/ams/amshackathon/frontend/" data-rel="back">Back</a>
			</div>
			<div role="main" class="ui-content" id="single-canvas">
				<!-- single content loads here... -->
			</div>
		</div>

		<!-- Load map assets at bottom for performance -->
		<script type="text/javascript" src="js/jquery.gmap.js"></script>
		<script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
		<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/tags/infobox/1.0/src/infobox_packed.js"></script>
	</body>
</html>
